<!DOCTYPE HTML>
	<head>
		<meta charset="utf8">
		<style>
			html, body {
			  height: 100%;
			  margin: 1%;
			}
			#blocklyArea {
			  height: 50%;
			  background:black; 
			  text-align: center;
			}
		</style>
	</head>

	<body>
		<script src="src/blockly_compressed.js"></script>
		<script src="src/blocks_compressed.js"></script>
		<script src="src/msg/js/en.js"></script>

		<!-- Google code-prettify added -->
		<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
		
		<div id="blocklyArea">
			<div id="blocklyDiv" style="position:static"></div> 
		</div>

		<xml id="toolbox" style="display: none">
			<category name="Pallette">
				<block type="mouse_moveTo"></block>
				<block type="mouse_move"></block>
				<block type="mouse_click"></block>
				<block type="mouse_scroll"></block>
				<block type="mouse_dragTo"></block>
				<block type="mouse_drag"></block>
				<block type="keyboard_typewrite"></block>
				<block type="keyboard_press"></block>
			</category>
		</xml>

		<!--import blocks-->
		<script src="blocks.js"></script>

		<pre class="prettyprint">
			import pyautogui

			public class Foo{
				public static void main(String[] args){
					System.out.println("bar");
				}
			}
		</pre>
				

		<div style="text-align: center;" >
			<button onclick="parseBlocks()" style="height: 40px; width: 200px">Parse Blocks</button>
		</div>

		<script>
			function parseBlocks(){
				var blocks = Blockly.getMainWorkspace().getAllBlocks(ordered=true);
				console.log(blocks)
				blocks.forEach(function(block){
					console.log(Blockly.Xml.domToPrettyText(Blockly.Xml.blockToDom(block)));
				})
			}

			//Responsive Script
			var blocklyArea = document.getElementById('blocklyArea');
			var blocklyDiv = document.getElementById('blocklyDiv');
			var workspace = Blockly.inject(blocklyDiv,
					{toolbox: document.getElementById('toolbox')});
			var onresize = function(e) {
				// Compute the absolute coordinates and dimensions of blocklyArea.
				var element = blocklyArea;
				var x = 0;
				var y = 0;
				do {
					x += element.offsetLeft;
					y += element.offsetTop;
					element = element.offsetParent;
				} while (element);
				// Position blocklyDiv over blocklyArea.
				blocklyDiv.style.left = x + 'px';
				blocklyDiv.style.top = y + 'px';
				blocklyDiv.style.width = blocklyArea.offsetWidth + 'px';
				blocklyDiv.style.height = blocklyArea.offsetHeight + 'px';
				Blockly.svgResize(workspace);
			};
			window.addEventListener('resize', onresize, false);
			onresize();
			Blockly.svgResize(workspace);


		</script>
	</body>
